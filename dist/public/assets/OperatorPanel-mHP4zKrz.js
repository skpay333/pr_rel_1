import{r as a,j as e}from"./react-vendor-DXh2JWUH.js";import{C as l,B as d}from"./card-l8B5EJfV.js";import{I as F}from"./input-BK4KRhIb.js";import{L as c}from"./label-CgwsQBad.js";import{T as De,a as $e,b as L,c as R}from"./tabs-T0-tMZ9B.js";import{D as Q,a as Y,b as Z,c as ee,f as Fe,g as se}from"./avatar-nL0TpwiJ.js";import{T as Le}from"./textarea-CiUoc1B0.js";import{S as Re,a as Ue,b as Pe,c as Oe,d as U,P as Ae}from"./PaymentDetailsDialog-B7E2mNGi.js";import{B as te}from"./badge-Dedo9uIt.js";import{t as ie,v as Ee}from"./ui-core-DuOrk3UI.js";import{c as ae,u as ze,f as re}from"./index-XvOZlhht.js";import{C as O,X as ne,f as ce,a as Be,M as He,e as P}from"./icons-vendor-BKMeapAd.js";import"./ui-extended-CLSNRB24.js";import"./utils-vendor-B2rm_Apj.js";import"./react-query-DV86JtqI.js";const me=a.forwardRef(({className:p,...N},v)=>e.jsx(ie,{className:ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",p),...N,ref:v,children:e.jsx(Ee,{className:ae("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));me.displayName=ie.displayName;const oe={submitted:"bg-blue-500 text-white",assigned:"bg-purple-500 text-white",processing:"bg-yellow-500 text-black",paid:"bg-green-500 text-white",rejected:"bg-red-500 text-white",cancelled:"bg-gray-400 text-white"},le={submitted:"ÐžÐ¢ÐŸÐ ÐÐ’Ð›Ð•ÐÐ",assigned:"ÐÐÐ—ÐÐÐ§Ð•ÐÐ",processing:"Ð’ ÐžÐ‘Ð ÐÐ‘ÐžÐ¢ÐšÐ•",paid:"ÐžÐŸÐ›ÐÐ§Ð•ÐÐž",rejected:"ÐžÐ¢ÐšÐ›ÐžÐÐ•ÐÐž",cancelled:"ÐžÐ¢ÐœÐ•ÐÐ•ÐÐž"},de={submitted:Be,assigned:O,processing:O,paid:ce,rejected:ne,cancelled:ne};function rs(){const[p,N]=a.useState(!1),[v,ue]=a.useState(""),[A,xe]=a.useState(""),[r,he]=a.useState(""),[pe,fe]=a.useState(""),[E,z]=a.useState(!1),[C,B]=a.useState(!1),[ge,H]=a.useState(!1),[f,be]=a.useState("active"),[w,je]=a.useState([]),[Ne,J]=a.useState(!1),[i,ve]=a.useState(null),[we,M]=a.useState(!1),[n,V]=a.useState(null),[ye,y]=a.useState(!1),[k,T]=a.useState({open:!1,paymentId:null}),[h,_]=a.useState("processing"),[q,I]=a.useState(""),[g,D]=a.useState(null),[W,X]=a.useState(!1),[u,$]=a.useState({open:!1,src:"",name:""}),{toast:m}=ze(),Se=async s=>{s.preventDefault(),z(!0);try{const t=await fetch("/api/operator/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:v,password:A}),credentials:"include"});if(!t.ok){const j=await t.json();throw new Error(j.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°")}const o=await t.json();he(o.id),fe(o.login),B(o.isOnline||!1),N(!0),m({title:"Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ Ð²Ñ…Ð¾Ð´",description:`Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ, ${o.login}`})}catch(t){m({title:"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°",description:t instanceof Error?t.message:"ÐÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð»Ð¾Ð³Ð¸Ð½ Ð¸Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ",variant:"destructive"})}finally{z(!1)}},Ce=async s=>{if(r){H(!0);try{if(!(await fetch(`/api/operator/${r}/online-status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isOnline:s}),credentials:"include"})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°");B(s),m({title:s?"Ð’Ñ‹ Ð² ÑÐµÑ‚Ð¸":"Ð’Ñ‹ Ð¾Ñ„Ñ„Ð»Ð°Ð¹Ð½",description:s?"Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹ Ð±ÑƒÐ´ÐµÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ Ð½Ð¾Ð²Ñ‹Ñ… Ð·Ð°ÑÐ²ÐºÐ°Ñ…":"Ð’Ñ‹ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ"})}catch{m({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",description:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ",variant:"destructive"})}finally{H(!1)}}},b=a.useCallback(async()=>{if(r){J(!0);try{const s=await fetch(`/api/operator/${r}/payments?status=${f}`,{credentials:"include"});if(!s.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð·Ð°ÑÐ²Ð¾Ðº");const t=await s.json();je(t)}catch(s){console.error("Failed to load payments:",s)}finally{J(!1)}}},[r,f]),G=a.useCallback(async()=>{if(r){M(!0);try{const s=await fetch(`/api/operator/${r}/statistics`,{credentials:"include"});if(!s.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸");const t=await s.json();ve(t)}catch(s){console.error("Failed to load statistics:",s)}finally{M(!1)}}},[r]);a.useEffect(()=>{if(p&&r)if(f==="statistics")G();else{b();const s=setInterval(b,1e4);return()=>clearInterval(s)}},[p,r,b,G,f]);const ke=async s=>{if(r)try{const t=await fetch(`/api/operator/${r}/payments/${s}/take`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok){const o=await t.json();throw new Error(o.message||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð²Ð·ÑÑ‚Ð¸Ñ Ð·Ð°ÑÐ²ÐºÐ¸")}m({title:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾",description:"Ð—Ð°ÑÐ²ÐºÐ° Ð²Ð·ÑÑ‚Ð° Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ"}),b()}catch(t){m({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",description:t instanceof Error?t.message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð²Ð·ÑÑ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ",variant:"destructive"})}},Te=async()=>{if(!(!n||!r)){X(!0);try{let s;if(g&&h==="paid"){const o=await new Promise((j,x)=>{const S=new FileReader;S.onload=()=>{const Ie=S.result.split(",")[1];j(Ie)},S.onerror=x,S.readAsDataURL(g)});s={type:g.type.includes("pdf")?"pdf":"image",value:o,name:g.name,mimeType:g.type}}if(!(await fetch(`/api/operator/${r}/payments/${n.id}/process`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:h,adminComment:q||void 0,receipt:s})})).ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð·Ð°ÑÐ²ÐºÐ¸");m({title:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾",description:`Ð—Ð°ÑÐ²ÐºÐ° ${h==="paid"?"Ð¾Ð¿Ð»Ð°Ñ‡ÐµÐ½Ð°":h==="rejected"?"Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð°":"Ð²Ð·ÑÑ‚Ð° Ð² Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ"}`}),y(!1),V(null),I(""),D(null),b()}catch(s){m({title:"ÐžÑˆÐ¸Ð±ÐºÐ°",description:s instanceof Error?s.message:"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ",variant:"destructive"})}finally{X(!1)}}},K=(s,t,o)=>{const j=s.startsWith("data:")?s:`data:${o};base64,${s}`,x=document.createElement("a");x.href=j,x.download=t,document.body.appendChild(x),x.click(),document.body.removeChild(x)};return p?e.jsx("div",{className:"min-h-screen bg-background p-4 pb-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð°"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:["ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€: ",pe]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-card rounded-[12px] shadow-soft",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${C?"bg-green-500":"bg-gray-400"} animate-pulse`}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:C?"ÐžÐ½Ð»Ð°Ð¹Ð½":"ÐžÑ„Ð»Ð°Ð¹Ð½"})]}),e.jsx(me,{checked:C,onCheckedChange:Ce,disabled:ge})]}),e.jsx(d,{variant:"outline",onClick:()=>N(!1),className:"rounded-[12px]",children:"Ð’Ñ‹Ð¹Ñ‚Ð¸"})]})]}),e.jsxs(De,{value:f,onValueChange:s=>be(s),className:"w-full",children:[e.jsxs($e,{className:"grid w-full grid-cols-3 bg-card shadow-soft-sm rounded-[18px] p-1 mb-6",children:[e.jsx(L,{value:"active",className:"rounded-[14px] data-[state=active]:bg-accent data-[state=active]:text-accent-foreground data-[state=active]:shadow-soft-sm font-semibold transition-soft",children:"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ"}),e.jsx(L,{value:"completed",className:"rounded-[14px] data-[state=active]:bg-accent data-[state=active]:text-accent-foreground data-[state=active]:shadow-soft-sm font-semibold transition-soft",children:"Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ‹Ðµ"}),e.jsx(L,{value:"statistics",className:"rounded-[14px] data-[state=active]:bg-accent data-[state=active]:text-accent-foreground data-[state=active]:shadow-soft-sm font-semibold transition-soft",children:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°"})]}),e.jsx(R,{value:"active",className:"space-y-4 animate-fade-in",children:Ne?e.jsx(l,{className:"p-12 text-center bg-card shadow-soft",children:e.jsx("p",{className:"text-muted-foreground",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°..."})}):w.length===0?e.jsxs(l,{className:"p-12 text-center bg-card shadow-soft",children:[e.jsx(O,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ÐÐµÑ‚ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð°ÑÐ²Ð¾Ðº"})]}):e.jsx("div",{className:"grid gap-4",children:w.map(s=>{const t=de[s.status];return e.jsxs(l,{className:"p-6 bg-card shadow-soft hover-lift transition-soft",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:s.username})]}),e.jsxs(te,{className:`${oe[s.status]} rounded-full text-xs font-semibold px-3 py-2 shadow-soft-sm flex items-center gap-2`,children:[e.jsx(t,{className:"w-4 h-4"}),le[s.status]]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-1",children:"Ð¡ÑƒÐ¼Ð¼Ð°"}),e.jsxs("p",{className:"text-2xl font-bold tabular-nums text-foreground",children:[Number(s.amountRub).toLocaleString("ru-RU")," â‚½"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-1",children:"USDT"}),e.jsx("p",{className:"text-2xl font-bold tabular-nums text-foreground",children:Number(s.amountUsdt).toFixed(2)})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground border-t border-border pt-4 mb-4",children:[e.jsxs("p",{children:["ÐšÑƒÑ€Ñ: ",Number(s.frozenRate).toFixed(2)," â‚½"]}),e.jsxs("p",{children:["Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾ÑÑ‚ÑŒ: ",s.urgency==="urgent"?"âš¡ Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾":"â±ï¸ Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾"]}),e.jsxs("p",{children:["Ð¡Ð¾Ð·Ð´Ð°Ð½Ð°: ",re(s.createdAt)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",className:"flex-1",onClick:()=>T({open:!0,paymentId:s.id}),children:"Ð”ÐµÑ‚Ð°Ð»Ð¸"}),s.status==="submitted"&&!s.assignedOperatorId?e.jsx(d,{variant:"default",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>ke(s.id),children:"Ð’Ð·ÑÑ‚ÑŒ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ"}):s.assignedOperatorId===r&&["assigned","processing"].includes(s.status)?e.jsx(d,{variant:"default",className:"flex-1",onClick:()=>{V(s),y(!0),_("processing"),I(""),D(null)},children:"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ"}):null]})]},s.id)})})}),e.jsx(R,{value:"completed",className:"space-y-4 animate-fade-in",children:w.length===0?e.jsxs(l,{className:"p-12 text-center bg-card shadow-soft",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"ÐÐµÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ‹Ñ… Ð·Ð°ÑÐ²Ð¾Ðº"})]}):e.jsx("div",{className:"grid gap-4",children:w.map(s=>{const t=de[s.status];return e.jsxs(l,{className:"p-6 bg-card shadow-soft",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"}),e.jsx("p",{className:"text-lg font-bold text-foreground",children:s.username})]}),e.jsxs(te,{className:`${oe[s.status]} rounded-full text-xs font-semibold px-3 py-2 shadow-soft-sm flex items-center gap-2`,children:[e.jsx(t,{className:"w-4 h-4"}),le[s.status]]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-1",children:"Ð¡ÑƒÐ¼Ð¼Ð°"}),e.jsxs("p",{className:"text-2xl font-bold tabular-nums text-foreground",children:[Number(s.amountRub).toLocaleString("ru-RU")," â‚½"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-1",children:"USDT"}),e.jsx("p",{className:"text-2xl font-bold tabular-nums text-foreground",children:Number(s.amountUsdt).toFixed(2)})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground border-t border-border pt-4 mb-4",children:[e.jsxs("p",{children:["Ð¡Ð¾Ð·Ð´Ð°Ð½Ð°: ",re(s.createdAt)]}),s.adminComment&&e.jsxs("p",{className:"mt-2 text-foreground",children:["ðŸ’¬ ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹: ",s.adminComment]})]}),e.jsx(d,{variant:"outline",className:"w-full",onClick:()=>T({open:!0,paymentId:s.id}),children:"Ð”ÐµÑ‚Ð°Ð»Ð¸"})]},s.id)})})}),e.jsx(R,{value:"statistics",className:"space-y-6 animate-fade-in",children:we?e.jsx(l,{className:"p-12 text-center bg-card shadow-soft",children:e.jsx("p",{className:"text-muted-foreground",children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸..."})}):i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(l,{className:"p-6 bg-card shadow-soft",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"Ð’ÑÐµÐ³Ð¾ Ð·Ð°ÑÐ²Ð¾Ðº"}),e.jsx("p",{className:"text-4xl font-bold text-foreground tabular-nums",children:i.totalCount})]}),e.jsxs(l,{className:"p-6 bg-card shadow-soft border-2 border-[hsl(var(--success))]",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ñ…"}),e.jsx("p",{className:"text-4xl font-bold text-[hsl(var(--success))] tabular-nums",children:i.paidCount})]}),e.jsxs(l,{className:"p-6 bg-card shadow-soft border-2 border-destructive",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾"}),e.jsx("p",{className:"text-4xl font-bold text-destructive tabular-nums",children:i.rejectedCount})]}),e.jsxs(l,{className:"p-6 bg-card shadow-soft border-2 border-primary",children:[e.jsx("p",{className:"text-xs font-semibold uppercase text-muted-foreground mb-2",children:"ÐšÐ¾Ð½Ð²ÐµÑ€ÑÐ¸Ñ"}),e.jsxs("p",{className:"text-4xl font-bold text-primary tabular-nums",children:[i.conversionRate.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"p-6 bg-card shadow-soft",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð² Ñ€ÑƒÐ±Ð»ÑÑ…"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-border",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð’ÑÐµÐ³Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾:"}),e.jsxs("span",{className:"text-2xl font-bold tabular-nums text-foreground",children:[Number(i.totalAmountRub).toLocaleString("ru-RU")," â‚½"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-border",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ Ð²Ñ‹Ð¿Ð»Ð°Ñ‡ÐµÐ½Ð¾:"}),e.jsxs("span",{className:"text-2xl font-bold tabular-nums text-[hsl(var(--success))]",children:[Number(i.paidAmountRub).toLocaleString("ru-RU")," â‚½"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾:"}),e.jsxs("span",{className:"text-2xl font-bold tabular-nums text-destructive",children:[Number(i.rejectedAmountRub).toLocaleString("ru-RU")," â‚½"]})]})]})]}),e.jsxs(l,{className:"p-6 bg-card shadow-soft",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð² USDT"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-border",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð’ÑÐµÐ³Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð¾:"}),e.jsxs("span",{className:"text-2xl font-bold tabular-nums text-foreground",children:[Number(i.totalAmountUsdt).toFixed(2)," USDT"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-border",children:[e.jsx("span",{className:"text-muted-foreground",children:"Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ Ð²Ñ‹Ð¿Ð»Ð°Ñ‡ÐµÐ½Ð¾:"}),e.jsxs("span",{className:"text-2xl font-bold tabular-nums text-[hsl(var(--success))]",children:[Number(i.paidAmountUsdt).toFixed(2)," USDT"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾:"}),e.jsxs("span",{className:"text-2xl font-bold tabular-nums text-destructive",children:[Number(i.rejectedAmountUsdt).toFixed(2)," USDT"]})]})]})]})]})]}):e.jsx(l,{className:"p-12 text-center bg-card shadow-soft",children:e.jsx("p",{className:"text-muted-foreground",children:"ÐÐµÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ…"})})})]}),e.jsx(Q,{open:ye,onOpenChange:y,children:e.jsxs(Y,{className:"max-w-2xl bg-card rounded-[18px]",children:[e.jsxs(Z,{children:[e.jsx(ee,{className:"text-2xl font-bold text-foreground",children:"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð·Ð°ÑÐ²ÐºÐ¸"}),e.jsxs(Fe,{className:"text-muted-foreground",children:[n==null?void 0:n.username," â€¢ ",Number(n==null?void 0:n.amountRub).toLocaleString("ru-RU")," â‚½"]})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-foreground font-semibold",children:"Ð¡ÑƒÐ¼Ð¼Ð° (â‚½)"}),e.jsx("p",{className:"text-2xl font-bold tabular-nums mt-2",children:Number(n.amountRub).toLocaleString("ru-RU")})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-foreground font-semibold",children:"USDT"}),e.jsx("p",{className:"text-2xl font-bold tabular-nums mt-2",children:Number(n.amountUsdt).toFixed(2)})]})]}),n.comment&&e.jsxs("div",{children:[e.jsx(c,{className:"text-foreground font-semibold",children:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:n.comment})]}),n.attachments&&n.attachments.length>0&&e.jsxs("div",{children:[e.jsx(c,{className:"text-foreground font-semibold",children:"Ð’Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ"}),e.jsx("div",{className:"mt-2 space-y-3",children:n.attachments.map((s,t)=>{if(s.type==="link")return e.jsx("div",{className:"text-sm",children:e.jsxs("a",{href:s.value,target:"_blank",rel:"noopener noreferrer",className:"text-accent hover:underline",children:["ðŸ”— ",s.name||s.value]})},t);if(s.type==="image"){const o=s.value.startsWith("data:")?s.value:`data:image/jpeg;base64,${s.value}`;return e.jsxs("div",{className:"border rounded-lg p-2 bg-muted/30",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:o,alt:s.name||`Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ${t+1}`,className:"w-full h-auto rounded-md cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>$({open:!0,src:o,name:s.name||`Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ${t+1}`})}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>$({open:!0,src:o,name:s.name||`Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ${t+1}`}),children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>K(s.value,s.name||`image_${t+1}.jpg`,"image/jpeg"),children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.name||`Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ ${t+1}`})]},t)}return e.jsxs("div",{className:"border rounded-lg p-3 bg-muted/30 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:s.name||`Ð¤Ð°Ð¹Ð» ${t+1}`}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>K(s.value,s.name||`file_${t+1}`,"application/octet-stream"),children:e.jsx(P,{className:"w-4 h-4"})})]},t)})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"status",className:"text-foreground font-semibold",children:"Ð¡Ñ‚Ð°Ñ‚ÑƒÑ"}),e.jsxs(Re,{value:h,onValueChange:s=>_(s),children:[e.jsx(Ue,{className:"mt-2 rounded-[12px]",children:e.jsx(Pe,{})}),e.jsxs(Oe,{children:[e.jsx(U,{value:"processing",children:"Ð’ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ"}),e.jsx(U,{value:"paid",children:"ÐžÐ¿Ð»Ð°Ñ‡ÐµÐ½Ð¾"}),e.jsx(U,{value:"rejected",children:"ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾"})]})]})]}),h==="paid"&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"receipt",className:"text-foreground font-semibold",children:"Ð§ÐµÐº (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"}),e.jsx(F,{id:"receipt",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>{var t;return D(((t=s.target.files)==null?void 0:t[0])||null)},className:"mt-2 rounded-[12px]"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"comment",className:"text-foreground font-semibold",children:"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"}),e.jsx(Le,{id:"comment",value:q,onChange:s=>I(s.target.value),placeholder:"Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹...",className:"mt-2 rounded-[12px]",rows:3})]})]}),e.jsxs(se,{children:[e.jsx(d,{variant:"outline",onClick:()=>y(!1),className:"rounded-[12px]",children:"ÐžÑ‚Ð¼ÐµÐ½Ð°"}),e.jsx(d,{onClick:Te,disabled:W,className:"rounded-[12px] bg-accent text-accent-foreground hover:bg-accent/90 shadow-soft-sm",children:W?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°...":"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"})]})]})}),e.jsx(Q,{open:u.open,onOpenChange:s=>$({...u,open:s}),children:e.jsxs(Y,{className:"max-w-6xl bg-card p-2",children:[e.jsx(Z,{children:e.jsx(ee,{className:"text-foreground",children:u.name})}),e.jsx("div",{className:"relative",children:e.jsx("img",{src:u.src,alt:u.name,className:"w-full h-auto rounded-md"})}),e.jsx(se,{children:e.jsxs(d,{variant:"outline",onClick:()=>{const s=document.createElement("a");s.href=u.src,s.download=u.name,document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ"]})})]})}),e.jsx(Ae,{open:k.open,onOpenChange:s=>T({open:s,paymentId:k.paymentId}),paymentId:k.paymentId||"",isAdmin:!1,operatorId:r})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(l,{className:"w-full max-w-md p-8 shadow-soft-lg bg-card",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð°"}),e.jsx("p",{className:"text-muted-foreground",children:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð²Ñ…Ð¾Ð´Ð°"})]}),e.jsxs("form",{onSubmit:Se,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"login",className:"text-foreground font-semibold",children:"Ð›Ð¾Ð³Ð¸Ð½"}),e.jsx(F,{id:"login",type:"text",value:v,onChange:s=>ue(s.target.value),placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸Ð½",required:!0,className:"mt-2 rounded-[12px] border-border"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"password",className:"text-foreground font-semibold",children:"ÐŸÐ°Ñ€Ð¾Ð»ÑŒ"}),e.jsx(F,{id:"password",type:"password",value:A,onChange:s=>xe(s.target.value),placeholder:"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ",required:!0,className:"mt-2 rounded-[12px] border-border"})]}),e.jsx(d,{type:"submit",className:"w-full rounded-[12px] bg-accent text-accent-foreground hover:bg-accent/90 shadow-soft-sm font-semibold py-6",disabled:E,children:E?"Ð’Ñ…Ð¾Ð´...":"Ð’Ð¾Ð¹Ñ‚Ð¸"})]})]})})}export{rs as default};
